(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[3],{316:function(e,s,a){e.exports={block:"messages_block__2BgDr",container:"messages_container__3wtWU",allChats:"messages_allChats__3mSfp",iconMenuMobile:"messages_iconMenuMobile__1pmku",refreshAllChats:"messages_refreshAllChats__1oqnY",fieldUsers:"messages_fieldUsers__1_-08",selectedChat:"messages_selectedChat__2_1DR",userSelectedName:"messages_userSelectedName__3bVeo",name:"messages_name__N0YZW",fieldChat:"messages_fieldChat__1q_ON",field:"messages_field__1z_ku"}},317:function(e,s,a){e.exports={sendField:"send-message-form_sendField__1rm3X",inputContainer:"send-message-form_inputContainer__2QeCd",printMess:"send-message-form_printMess__6KDYN",sendMess:"send-message-form_sendMess__ZPsNd"}},318:function(e,s,a){e.exports={chatContainer:"selected-chat_chatContainer__2omSx",btn:"selected-chat_btn__H0_-f",chat:"selected-chat_chat__uw0az",my:"selected-chat_my__a-DdE",sms:"selected-chat_sms__33sON",friend:"selected-chat_friend__1yZZ_"}},319:function(e,s,a){e.exports={item:"chat-list_item__1sAej",avatar:"chat-list_avatar__21FDM",ava:"chat-list_ava__27ytM",main:"chat-list_main__1V34l",name:"chat-list_name__khjdj",lastMessages:"chat-list_lastMessages__2KDrg",info:"chat-list_info__3JFxE",time:"chat-list_time__cMw-A",countUnread:"chat-list_countUnread__3w6BA"}},326:function(e,s,a){"use strict";a.r(s);var t=a(15),c=a(17),n=a(2),i=a(316),l=a.n(i),r=a(22),d=a(28),o=a(312),m=a(90),j=a(317),u=a.n(j),b=a(111),h=a(150),_=a(20),f=a(1),g=Object(m.a)(1e3),O=Object(h.a)({form:"dialog"})((function(e){return Object(f.jsxs)("form",{onSubmit:e.handleSubmit,className:u.a.sendField,children:[Object(f.jsx)("div",{className:u.a.inputContainer,children:Object(f.jsx)(b.a,{placeholder:"Enter sms",component:_.b,name:"massages",validate:[m.b,g],props:{className:u.a.printMess}})}),Object(f.jsx)("button",{type:"submit",className:u.a.sendMess,children:Object(f.jsx)(o.c,{})})]})})),x=a(43),N=a(318),v=a.n(N),p=function(e){Object(n.useEffect)((function(){var e=document.querySelector("#messageBody");null!==e&&(e.scrollTop=e.scrollHeight-e.clientHeight),c(2)}),[e.recipientId]);var s=Object(n.useState)(2),a=Object(x.a)(s,2),t=a[0],c=a[1];return Object(f.jsxs)("div",{className:v.a.chatContainer,id:"messageBody",children:[e.totalCount>e.messages.length?Object(f.jsx)("button",{className:v.a.btn,onClick:function(){e.selectedDialogMessages(e.recipientId,t,20),c(++t)},children:"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0435\u0449\u0435"}):Object(f.jsx)(f.Fragment,{}),e.messages.map((function(s){return Object(f.jsx)("div",{className:v.a.chat,children:e.authorizationUserId===s.senderId?Object(f.jsx)("div",{className:v.a.my,children:Object(f.jsx)("p",{className:v.a.sms,children:s.body})}):Object(f.jsx)("div",{className:v.a.friend,children:Object(f.jsx)("p",{className:v.a.sms,children:s.body})})},s.id)}))]})},M=a(57),C=a(319),D=a.n(C),y=a(85),k=function(e){var s=function(e){var s=new Date;return s.getMonth()===Number(e.substr(5,2)-1)&&s.getDate()===e.substr(8,2)&&s.getFullYear()===e.substr(0,4)?e.substr(11,5):e.substr(5,5)};return Object(f.jsx)(f.Fragment,{children:e.users.map((function(e){return Object(f.jsxs)(r.b,{to:"/messages/"+e.id,className:D.a.item,children:[Object(f.jsx)("div",{className:D.a.avatar,children:Object(f.jsx)("img",{className:D.a.ava,src:null!=e.photos.small?e.photos.small:y.a,alt:"avatar"})}),Object(f.jsxs)("div",{className:D.a.main,children:[Object(f.jsx)("div",{className:D.a.name,children:e.userName}),e.hasNewMessages&&Object(f.jsx)("div",{className:D.a.lastMessages,children:"New messages!"})]}),Object(f.jsxs)("div",{className:D.a.info,children:[Object(f.jsx)("div",{className:D.a.time,children:s(e.lastDialogActivityDate)}),0!==e.newMessagesCount&&Object(f.jsx)("div",{className:D.a.countUnread,children:e.newMessagesCount})]})]},e.id)}))})},w=a(6),S=a(18),U=function(e){return{isAuth:e.auth.isAuthorization}},A=a(50),F=a(128),I=a(58),z=Object(t.d)(Object(c.b)((function(e){return{messages:e.dialog.messages,authorizationUserId:e.auth.userId,users:e.dialog.users,profile:e.profile.profile,totalCount:e.dialog.totalCount,isFetching:Object(A.b)(e)}}),(function(e){return{selectedDialogMessages:function(s,a,t){e(Object(F.b)(s,a,t))},sendMessage:function(s,a){e(Object(F.d)(s,a))},usersTalkedWith:function(){e(Object(F.c)())},getOneProfile:function(s){e(Object(I.a)(s))}}})),(function(e){return Object(c.b)(U)((function(s){return!1===s.isAuth?Object(f.jsx)(S.a,{to:"/login"}):Object(f.jsx)(e,Object(w.a)({},s))}))}))((function(e){var s=e.match.params.userID;Object(n.useEffect)((function(){s&&(e.selectedDialogMessages(s,1,20),e.getOneProfile(s))}),[s]),Object(n.useEffect)((function(){e.usersTalkedWith()}),[]);return Object(f.jsx)("div",{className:l.a.block,children:Object(f.jsxs)("div",{className:l.a.container,children:[Object(f.jsxs)("div",{className:l.a.allChats,children:[Object(f.jsx)("div",{className:l.a.iconMenuMobile,children:Object(f.jsx)(d.b,{})}),Object(f.jsx)("div",{className:l.a.refreshAllChats,children:Object(f.jsx)(r.b,{to:"/messages/"+s,children:Object(f.jsx)("div",{onClick:function(){return e.usersTalkedWith()},children:Object(f.jsx)(o.b,{})})})}),Object(f.jsx)("div",{className:l.a.fieldUsers,children:null!=e.users?Object(f.jsx)(k,{users:e.users}):Object(f.jsx)("div",{children:"\u043d\u0435\u0442 \u0434\u0438\u0430\u043b\u043e\u0433\u043e\u0432"})})]}),Object(f.jsxs)("div",{className:l.a.selectedChat,children:[null!=e.profile&&void 0!==s?Object(f.jsx)("div",{className:l.a.userSelectedName,children:Object(f.jsx)("div",{className:l.a.name,children:e.profile.fullName})}):Object(f.jsx)("div",{className:l.a.userSelectedName,children:Object(f.jsx)("div",{className:l.a.name,children:"1"})}),Object(f.jsxs)("div",{className:l.a.fieldChat,children:[void 0!==s?null==e.messages||e.isFetching?Object(f.jsx)("div",{className:l.a.field,children:Object(f.jsx)(M.a,{})}):Object(f.jsx)(p,{messages:e.messages,authorizationUserId:e.authorizationUserId,recipientId:s,selectedDialogMessages:e.selectedDialogMessages,totalCount:e.totalCount}):Object(f.jsx)("div",{className:l.a.field,children:"\u0412\u044b\u0431\u0435\u0440\u0438 \u0434\u0438\u0430\u043b\u043e\u0433"}),Object(f.jsx)(O,{onSubmit:function(a){e.sendMessage(s,a.massages)}})]})]})]})})}));s.default=z}}]);
//# sourceMappingURL=3.db0d6acb.chunk.js.map